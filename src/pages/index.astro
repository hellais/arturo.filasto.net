---
import { Content as HomePage } from "../content/index.md";
---

<html lang="en">
  <head>
    <title>Arturo Filastò</title>
    <meta charset="utf-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="viewport" content="width=device-width" />
    <meta name="generator" content="r2" />
    <style>
      :root {
        --bg-color: rgb(30, 15, 13);
      }
      body {
        margin: 0;
        background-color: var(--bg-color);
      }
      .hero-bg {
        position: absolute;
        top: 0px;
        left: 0px;
        z-index: 1;
      }
      .vignette {
        border-radius: 30%;
        display: inline-block;
        position: relative;
        background-color: var(--bg-color);
      }
      .vignette canvas {
        border-radius: 30%;
        display: block;
        border: 1px solid var(--bg-color);
      }
      .vignette:after {
        content: "";
        display: block;
        width: 100%;
        height: 100%;
        border-radius: 30%;
        position: absolute;
        top: 0;
        left: 0;
        box-shadow:
          inset 10px 24px 40px 0px var(--bg-color),
          inset -10px -24px 40px 0px var(--bg-color),
          inset 20px -10px 40px 0px var(--bg-color),
          inset -20px 10px 40px 0px var(--bg-color);
      }
      #energy-ball {
        position: absolute;
        top: 100px;
        left: 500px;
        background-color: #ffe;
        mix-blend-mode: difference;
        width: 300px;
        height: 300px;
        border-radius: 50%;
        border: none;
        z-index: 999999;
        box-shadow:
          inset 10px 24px 40px 0px black,
          inset -10px -24px 40px 0px black,
          inset 20px -10px 40px 0px black,
          inset -20px 10px 40px 0px black;
        pointer-events: none;
      }
    </style>
  </head>
  <body>
    <div class="text-center py-64">
      <div id="energy-ball"></div>
      <h1
        class="text-6xl font-bold text-off-white"
        style="position: relative;z-index:9999;"
      >
        Arturo Filastò
      </h1>
    </div>
    <div class="hero-bg">
      <div class="vignette">
        <div class="flex justify-center">
          <canvas
            id="mainCanvas"
            style="width: 100%;height: 500px;display: block;"></canvas>
        </div>
      </div>
    </div>
    <div
      class="relative w-full px-6 py-12 md:max-w-3xl md:mx-auto lg:max-w-4xl lg:pt-16 lg:pb-28"
    >
      <article class="prose lg:prose-xl prose-invert">
        <HomePage />
      </article>
    </div>
    <script type="text/javascript">
      document.addEventListener("DOMContentLoaded", function () {
        const canvas = document.getElementById("mainCanvas");
        const ctx = canvas.getContext("2d");
        canvas.width = window.innerWidth;
        canvas.height = 500;
        let mouseX = window.innerWidth / 2;
        let mouseY = window.innerHeight / 2;

        let colors = [
          "rgb(229,13,14)", // bright red
          "rgb(125,1,10)", // muted red
        ];

        ("rgb(30,15,13)"); // black hsl(7, 40, 8)
        ("rgb(82, 22, 17)"); // maroon hsl(5, 66, 19)
        //"rgb(57, 255, 20)",
        //"rgb(229, 228, 226)",

        let offsetX = 0;
        let offsetY = 0;
        let colorIdx = 0;

        let particles = [];
        const numberOfParticles = 420;

        class Particle {
          constructor() {
            this.x = Math.random() * canvas.width;
            this.y = Math.random() * canvas.height;
            this.size = Math.random() * 5 + 1;
            this.speedX = Math.random() - 0.5;
            this.speedY = Math.random() - 0.5;
            this.colorIdx = Math.round(Math.random() * colors.length);
          }

          update() {
            this.x += this.speedX;
            let dX = (this.x - mouseX) * 0.001;
            this.x -= dX;
            this.y += this.speedY;
            let dY = (this.x - mouseY) * 0.001;
            this.y -= dY;
            if (this.size > 0.3) this.size -= 0.1;
          }

          draw() {
            ctx.fillStyle = colors[this.colorIdx];
            ctx.beginPath();
            ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
            ctx.fill();
          }
        }

        function init() {
          for (let i = 0; i < numberOfParticles; i++) {
            particles.push(new Particle());
          }
        }

        function handleParticles() {
          for (let i = 0; i < particles.length; i++) {
            particles[i].update();
            particles[i].draw();

            for (let j = i; j < particles.length; j++) {
              const dx = particles[i].x - particles[j].x;
              const dy = particles[i].y - particles[j].y;
              const distance = Math.sqrt(dx * dx + dy * dy);
              if (distance < 100) {
                ctx.beginPath();
                ctx.strokeStyle = colors[particles[i].colorIdx];
                ctx.lineWidth = 0.2;
                ctx.moveTo(particles[i].x, particles[i].y);
                ctx.lineTo(particles[j].x, particles[j].y);
                ctx.stroke();
              }
            }

            if (particles[i].size <= 0.3) {
              particles.splice(i, 1);
              i--;
              particles.push(new Particle());
            }
          }
        }

        function animateGradient() {
          const r0 = 10 * 2 + 10 * Math.sin(t * 0.002);
          const r1 = 100 * 2 + 80 * Math.cos(t * 0.002);
          const y = Math.min(mouseY - 150, 500);
          let gradient = ctx.createRadialGradient(mouseX, y, r0, mouseX, y, r1);
          gradient.addColorStop(0, `hsl(42, 97%, 88%)`);
          gradient.addColorStop(0.8, `hsl(5, 66%, 19%)`);
          gradient.addColorStop(1, `hsl(7, 40%, 8%)`);
          ctx.fillStyle = gradient;
          ctx.fillRect(0, 0, canvas.width, canvas.height);
        }

        function animateDots(time) {
          let size = 2 + 1 * Math.sin(t * 0.002);
          for (let idx = 0; idx < 100; idx++) {
            const x =
              canvas.width / 2 +
              (canvas.width / 2 - 100) *
                Math.sin(lsa * (t + 80 * idx) * 0.0003 + lsd);
            const y =
              canvas.height / 2 +
              (canvas.height / 2 - 50) *
                Math.sin(lsb * (t + 80 * idx) * 0.0003);
            ctx.fillStyle = "rgb(30, 15, 13)";
            ctx.beginPath();
            ctx.arc(x, y, size, 0, Math.PI * 2);
            ctx.fill();
          }
        }

        function animate(time) {
          ctx.clearRect(0, 0, canvas.width, canvas.height);
          animateGradient();
          handleParticles();
          animateDots(time);
          t += 2;
          requestAnimationFrame(animate);
        }

        let lsa = 5;
        let lsb = 6;
        let lsd = Math.PI / 2;

        let t = 0;
        init();
        animate();

        let hc = document.getElementById("energy-ball");
        window.addEventListener("mousemove", function (e) {
          offsetY = canvas.height / (canvas.height - e.screenY);
          offsetX = canvas.height / (canvas.width - e.screenX);
          mouseX = e.screenX;
          mouseY = e.screenY;
          hc.style.left = e.clientX - 150 + "px";
          hc.style.top = e.clientY - 150 + "px";
        });
      });
    </script>
  </body>
</html>
